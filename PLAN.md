# efx-face-manager Go TUI - Implementation Plan

## Overview

**efx-face-manager** is a TUI tool for managing MLX Hugging Face models and launching the `mlx-openai-server`. This plan converts the existing bash+gum script into a professional **Go + charmbracelet/bubbletea** application with a cohesive UI using lipgloss layouts.

Built with **Go + charmbracelet/bubbletea** for a professional TUI experience with a dedicated server output panel.

---

## Current Features Analysis (from bash script)

### Core Functionality
1. **Model Management**
   - List installed models (symlinks in MODEL_DIR)
   - Install models from HuggingFace (mlx-community, lmstudio-community, all)
   - Uninstall models (remove symlink + cache)
   - Configure model storage path (external/local)

2. **Server Launch**
   - Run with preset templates (GLM-4.7-Flash, Qwen3-Coder, etc.)
   - Run installed models with configuration options
   - Support multiple model types: lm, multimodal, image-generation, image-edit, embeddings, whisper

3. **Configuration Options**
   - Context length, tool parsers, reasoning parsers
   - Trust remote code, debug mode
   - Image config (quantize, LoRA paths/scales)
   - Whisper config (concurrency, queue)
   - Server options (port, host, log level)

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        efx-face-manager (Go binary)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        Bubble Tea TUI Layer                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚   Main   â”‚ â”‚   Run    â”‚ â”‚ Install  â”‚ â”‚  Config  â”‚ â”‚  Server  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   Menu   â”‚ â”‚   View   â”‚ â”‚   View   â”‚ â”‚   View   â”‚ â”‚  Output  â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        Charmbracelet Libraries                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚bubbleteaâ”‚  â”‚ bubbles â”‚  â”‚ glamour â”‚  â”‚lipgloss â”‚  â”‚   huh   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  (TUI)  â”‚  â”‚(widgets)â”‚  â”‚  (MD)   â”‚  â”‚(styles) â”‚  â”‚ (forms) â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                           Core Services                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  HuggingFaceâ”‚  â”‚   Model     â”‚  â”‚   Server    â”‚  â”‚   Config    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    API      â”‚  â”‚   Store     â”‚  â”‚   Runner    â”‚  â”‚   Manager   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Feature: Split-Panel Layout with Server Output

Inspired by charmbracelet/glow, the TUI will feature a **split-panel layout** where the server output runs in a scrollable viewport panel:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚                                 â”‚
â”‚  Main Menu                                  â”‚  Server Output                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚                                             â”‚                                 â”‚
â”‚  > âš¡ Run LM on Template                    â”‚  INFO: Starting server...       â”‚
â”‚    Run an Installed Model                   â”‚  INFO: Loading model...         â”‚
â”‚    Install New HuggingFace Model            â”‚  INFO: Model loaded!            â”‚
â”‚    Uninstall a Model                        â”‚  INFO: Server ready on          â”‚
â”‚    Configure Storage Path                   â”‚        http://0.0.0.0:8000      â”‚
â”‚    Exit                                     â”‚                                 â”‚
â”‚                                             â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚                                             â”‚  [â†‘/â†“] scroll                   â”‚
â”‚  Models: ~/mlx-server (5 installed)         â”‚  [g/G] top/bottom               â”‚
â”‚                                             â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†µ] select  [q] quit  [?] help                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### When Server is Running:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0 - Server Running                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚                                 â”‚
â”‚  Server Status                              â”‚  Server Output                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚                                             â”‚                                 â”‚
â”‚  Model: GLM-4.7-Flash-8bit                  â”‚  INFO: Starting server...       â”‚
â”‚  Type:  lm                                  â”‚  INFO: Loading GLM-4.7-Flash    â”‚
â”‚  Host:  0.0.0.0:8000                        â”‚  INFO: Model loaded (12.4GB)    â”‚
â”‚                                             â”‚  INFO: Listening on 0.0.0.0:8000â”‚
â”‚  Command:                                   â”‚  INFO: Request from 127.0.0.1   â”‚
â”‚  mlx-openai-server launch                   â”‚  INFO: Processing prompt...     â”‚
â”‚    --model-path ~/mlx-server/GLM-4.7...     â”‚  INFO: Generated 128 tokens     â”‚
â”‚    --model-type lm                          â”‚  INFO: Request completed        â”‚
â”‚    --reasoning-parser glm47_flash           â”‚  â–ˆ                              â”‚
â”‚    --port 8000                              â”‚                                 â”‚
â”‚                                             â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [s] stop server  [c] clear output  [â†‘/â†“] scroll  [q] quit                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## TUI Views

### 1. Main Menu View (Default)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”â”Œâ”€â”â”€â” â”¬   â”Œâ”€â”â”Œâ”€â”â”Œâ”€â”â”Œâ”€â”                                      â”‚
â”‚  â”œâ”¤ â”œâ”¤ â”Œâ”´â”¬â”˜â”€â”€â”€â”œâ”¤ â”œâ”€â”¤â”‚  â”œâ”¤                                       â”‚
â”‚  â””â”€â”˜â””  â”´ â””â”€   â””  â”´ â”´â””â”€â”˜â””â”€â”˜  v1.0.0                              â”‚
â”‚                                                                  â”‚
â”‚  MLX Hugging Face Manager                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  > âš¡ Run LM on Template                                         â”‚
â”‚    Run an Installed Model                                        â”‚
â”‚    Install New HuggingFace Model                                 â”‚
â”‚    Uninstall a Model                                             â”‚
â”‚    Configure Storage Path                                        â”‚
â”‚    Exit                                                          â”‚
â”‚                                                                  â”‚
â”‚  Models: ~/mlx-server (5 installed)                              â”‚
â”‚  Storage: External (/Volumes/T7/mlx-server) âœ“                    â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†µ] select  [j/k] navigate  [q] quit                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Template Selection View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Select Template Model                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                  â”‚
â”‚  > GLM-4.7-Flash-8bit          lm      reasoning+tools           â”‚
â”‚    Qwen3-Coder-30B-A3B         lm      code+tools                â”‚
â”‚    NVIDIA-Nemotron-3-Nano      lm      tools                     â”‚
â”‚    Qwen3-VL-8B-Thinking        multi   vision+thinking           â”‚
â”‚                                                                  â”‚
â”‚  [Back]                                                          â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†µ] run  [e] edit config  [esc] back  [q] quit                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Model Selection View (Run Installed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Select Installed Model                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                  â”‚
â”‚  > GLM-4.7-Flash-8bit                                            â”‚
â”‚    Qwen3-Coder-30B-A3B-Instruct-8bit                             â”‚
â”‚    NVIDIA-Nemotron-3-Nano-30B-A3B-MLX-8Bit                       â”‚
â”‚    Qwen3-VL-8B-Thinking-8bit                                     â”‚
â”‚    whisper-large-v3-mlx                                          â”‚
â”‚                                                                  â”‚
â”‚  Models: ~/mlx-server                                            â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†µ] select type  [d] details  [esc] back  [q] quit              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Model Type Selection View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Model: GLM-4.7-Flash-8bit                                       â”‚
â”‚  Select Configuration                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                  â”‚
â”‚  > lm (text-only)                                                â”‚
â”‚    multimodal (vision, audio)                                    â”‚
â”‚    image-generation (qwen-image, q16)                            â”‚
â”‚    image-edit (qwen-image-edit, q16)                             â”‚
â”‚    embeddings                                                    â”‚
â”‚    whisper (audio transcription)                                 â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†µ] configure  [esc] back  [q] quit                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. Configuration View - Three-Panel Layout (Single Page)

The configuration view uses a **single-page, three-panel layout** using lipgloss for visual organization. All options are visible at once without navigating between screens.

#### Layout Structure:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Model: GLM-4.7-Flash-8bit                                                                    â”‚
â”‚  Configuration: lm (text-only)                                                                â”‚
â”‚  Models: /Volumes/T7/mlx-server                                                               â”‚
â”‚                                                                                               â”‚
â”‚  Command to execute:                                                                          â”‚
â”‚  mlx-openai-server launch --model-path /Volumes/T7/mlx-server/GLM-4.7-Flash-8bit             â”‚
â”‚    --model-type lm --host 0.0.0.0 --port 8000                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Control Panel      â”‚  â”‚  Configure lm options             â”‚  â”‚  Option Setup           â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚                                   â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚  â–¶ Run              â”‚  â”‚  Context length: (not set)        â”‚  â”‚  Tool call parser       â”‚ â”‚
â”‚  â”‚  ğŸ” Trust: disabled â”‚  â”‚  Auto tool choice: enabled        â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  âš™ï¸  Modify config...â”‚  â”‚  Tool call parser: (not set)      â”‚  â”‚  > qwen3               â”‚ â”‚
â”‚  â”‚  âœ– Cancel           â”‚  â”‚> Reasoning parser: (not set)      â”‚  â”‚    glm4_moe            â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  Message converter: (not set)     â”‚  â”‚    qwen3_coder         â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  Chat template file: (not set)    â”‚  â”‚    qwen3_moe           â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  Debug mode: disabled             â”‚  â”‚    qwen3_next          â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  Trust remote code: enabled       â”‚  â”‚    qwen3_vl            â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  Port: 8000                       â”‚  â”‚    harmony             â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  Host: 0.0.0.0                    â”‚  â”‚    minimax_m2          â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  Log level: INFO (default)        â”‚  â”‚    (clear)             â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  âœ… Done - continue to launch     â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  âœ– Cancel                         â”‚  â”‚                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†‘/â†“] navigate  [â†/â†’] switch panel  [â†µ] select/edit  [tab] next field  [esc] back           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Panel Responsibilities:

**Panel 1 - Control Panel (Left)**
- Quick actions: Run, Cancel
- Toggle shortcuts (Trust remote code)
- Navigation to modify full config

**Panel 2 - Options Panel (Center)**  
- All configurable parameters listed
- Current values displayed inline
- Cursor highlight for selected option
- Organized by category:
  - **Core Model**: Context length, Auto tool choice, Tool call parser, Reasoning parser, Message converter, Chat template file
  - **Security/Debug**: Debug mode, Trust remote code, Disable auto resize (multimodal only)
  - **Server**: Port, Host, Log level
  - **Model-specific**: Quantize, LoRA paths/scales (image), Concurrency settings (whisper/embeddings)

**Panel 3 - Option Setup (Right)**
- Shows available choices for selected option
- Select lists for parsers/converters
- Input fields for numeric/text values
- Toggle display for boolean options

#### Configuration by Model Type:

| Model Type | Left Panel | Center Panel | Right Panel |
|------------|------------|--------------|-------------|
| **lm** | Run, Trust toggle, Modify, Cancel | Context, Tool parser, Reasoning parser, Message converter, Chat template, Debug, Port, Host, Log level | Parser choices |
| **multimodal** | Run, Trust toggle, Modify, Cancel | Same as lm + Disable auto resize | Parser choices |
| **image-generation** | Run, Modify, Cancel | Config name, Quantize, LoRA paths, LoRA scales, Port, Host, Log level | Config presets, Quantize levels |
| **image-edit** | Run, Modify, Cancel | Config name, Quantize, LoRA paths, LoRA scales, Port, Host, Log level | Config presets, Quantize levels |
| **whisper** | Run, Modify, Cancel | Max concurrency, Queue timeout, Queue size, Port, Host, Log level | Numeric inputs |
| **embeddings** | Run, Modify, Cancel | Max concurrency, Queue timeout, Queue size, Port, Host, Log level | Numeric inputs |

#### Dynamic Command Preview:
The top panel always shows the **live command preview** that updates as options are modified:
```
Command to execute:
mlx-openai-server launch --model-path /Volumes/T7/mlx-server/GLM-4.7-Flash-8bit \
  --model-type lm --reasoning-parser glm47_flash --tool-call-parser glm4_moe \
  --trust-remote-code --port 8000 --host 0.0.0.0
```

### 6. HuggingFace Search/Install View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Install from HuggingFace                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                  â”‚
â”‚  Source: [mlx-community â–¾]                                       â”‚
â”‚  Search: > qwenâ–ˆ                                                 â”‚
â”‚                                                                  â”‚
â”‚  Results (page 1/5)                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  > Qwen3-30B-A3B-4bit              mlx-community     125k â†“      â”‚
â”‚    Qwen3-Coder-30B-A3B-8bit        mlx-community      89k â†“      â”‚
â”‚    Qwen3-VL-8B-Thinking-8bit       mlx-community      67k â†“      â”‚
â”‚    Qwen2.5-72B-Instruct-8bit       mlx-community      45k â†“      â”‚
â”‚    Qwen2-Audio-8bit                mlx-community      23k â†“      â”‚
â”‚                                                                  â”‚
â”‚  â— â—‹ â—‹ â—‹ â—‹                                                       â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†µ] details  [i] install  [â†/â†’] page  [tab] search  [esc] back  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7. Model Details/Preview View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  mlx-community/Qwen3-30B-A3B-4bit                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                  â”‚
â”‚  Models:       ~/mlx-server                                      â”‚
â”‚                                                                  â”‚
â”‚  Downloads:    125,432                                           â”‚
â”‚  Likes:        1,234                                             â”‚
â”‚  Pipeline:     text-generation                                   â”‚
â”‚  Library:      mlx                                               â”‚
â”‚  Updated:      2025-01-15                                        â”‚
â”‚  Size:         ~15.2 GB                                          â”‚
â”‚                                                                  â”‚
â”‚           [ Cancel ]  [ ğŸŒ Open in Browser ]  [ â¬‡ï¸ Install ]     â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [i] install  [o] open browser  [esc] back                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8. Server Manager View - Multi-Server Support (Split Panel)

The server view supports **multiple concurrent servers** running on different ports. Left panel shows controls and server list, right panel shows logs for the selected server.

#### Single Server Running:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0 - Server Manager                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚                                             â”‚
â”‚  Server Controls                                â”‚  Server Output: GLM-4.7-Flash-8bit :8000    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                 â”‚                                             â”‚
â”‚  Running Servers (1)                            â”‚  INFO:     Starting server...               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  INFO:     Loading model at                 â”‚
â”‚  â”‚ > â— GLM-4.7-Flash-8bit      :8000    lm  â”‚  â”‚            /Volumes/T7/mlx-server/GLM-4.7   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  INFO:     Model loaded! (8.2GB VRAM)       â”‚
â”‚                                                 â”‚  INFO:     Server listening on              â”‚
â”‚  Selected Server                                â”‚            http://0.0.0.0:8000              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚  INFO:     Ready to accept connections      â”‚
â”‚  Model: GLM-4.7-Flash-8bit                      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚  Type:  lm                                      â”‚  INFO:     POST /v1/chat/completions        â”‚
â”‚  Port:  8000                                    â”‚  INFO:     Processing 256 tokens...         â”‚
â”‚  Host:  0.0.0.0                                 â”‚  INFO:     Generated 128 tokens in 2.3s     â”‚
â”‚                                                 â”‚  INFO:     Request completed                â”‚
â”‚  Actions:                                       â”‚  â–ˆ                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                             â”‚
â”‚  â”‚  [s] Stop this server                     â”‚  â”‚                                             â”‚
â”‚  â”‚  [n] Start new server...                  â”‚  â”‚                                             â”‚
â”‚  â”‚  [m] Back to main menu                    â”‚  â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                             â”‚
â”‚                                                 â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†‘/â†“] select server  [s] stop  [n] new server  [c] clear logs  [g/G] top/bottom  [m] menu    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Multiple Servers Running:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0 - Server Manager (3 servers running)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚                                             â”‚
â”‚  Server Controls                                â”‚  Server Output: Qwen3-VL-8B :8001           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                 â”‚                                             â”‚
â”‚  Running Servers (3)                            â”‚  INFO:     Server listening on              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            http://0.0.0.0:8001              â”‚
â”‚  â”‚   â— GLM-4.7-Flash-8bit      :8000    lm  â”‚  â”‚  INFO:     Processing image input...        â”‚
â”‚  â”‚ > â— Qwen3-VL-8B-Thinking    :8001  multi â”‚  â”‚  INFO:     Vision encoder: 1024x1024        â”‚
â”‚  â”‚   â— whisper-large-v3        :8002  whis  â”‚  â”‚  INFO:     Generated response (45 tokens)   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  INFO:     Request completed in 3.1s        â”‚
â”‚                                                 â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚  Selected Server                                â”‚  INFO:     POST /v1/chat/completions        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚  INFO:     Multimodal request detected      â”‚
â”‚  Model: Qwen3-VL-8B-Thinking-8bit               â”‚  INFO:     Processing...                    â”‚
â”‚  Type:  multimodal                              â”‚  â–ˆ                                          â”‚
â”‚  Port:  8001                                    â”‚                                             â”‚
â”‚  Host:  0.0.0.0                                 â”‚                                             â”‚
â”‚                                                 â”‚                                             â”‚
â”‚  Actions:                                       â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                             â”‚
â”‚  â”‚  [s] Stop this server                     â”‚  â”‚                                             â”‚
â”‚  â”‚  [S] Stop ALL servers                     â”‚  â”‚                                             â”‚
â”‚  â”‚  [n] Start new server...                  â”‚  â”‚                                             â”‚
â”‚  â”‚  [m] Back to main menu                    â”‚  â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                             â”‚
â”‚                                                 â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†‘/â†“] select server  [s] stop  [S] stop all  [n] new  [c] clear  [1-9] quick select  [m] menuâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Starting New Server (from Server Manager):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  efx-face-manager v1.0.0 - Start New Server                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚                                             â”‚
â”‚  Configure New Server                           â”‚  Currently Running                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                 â”‚                                             â”‚
â”‚  Select Model:                                  â”‚  â— GLM-4.7-Flash-8bit      :8000    lm      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â— Qwen3-VL-8B-Thinking    :8001  multi     â”‚
â”‚  â”‚ > Qwen3-Coder-30B-A3B-Instruct-8bit      â”‚  â”‚                                             â”‚
â”‚  â”‚   NVIDIA-Nemotron-3-Nano-30B-A3B         â”‚  â”‚  Available Ports:                           â”‚
â”‚  â”‚   whisper-large-v3-mlx                    â”‚  â”‚  8002, 8003, 8004, ...                      â”‚
â”‚  â”‚   ...                                     â”‚  â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  âš ï¸  Port 8000 in use                        â”‚
â”‚                                                 â”‚  âš ï¸  Port 8001 in use                        â”‚
â”‚  Port: [8002]                                   â”‚                                             â”‚
â”‚  Type: [lm â–¾]                                   â”‚                                             â”‚
â”‚                                                 â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                             â”‚
â”‚  â”‚  [â†µ] Configure & Start                    â”‚  â”‚                                             â”‚
â”‚  â”‚  [esc] Cancel                             â”‚  â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                             â”‚
â”‚                                                 â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â†µ] select model  [tab] next field  [esc] cancel                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Server Manager Features:

| Feature | Description |
|---------|-------------|
| **Multi-server support** | Run multiple mlx-openai-server instances on different ports |
| **Server list** | Shows all running servers with model, port, and type |
| **Log switching** | Right panel shows logs for selected server |
| **Individual stop** | Stop single server without affecting others |
| **Stop all** | Kill all servers at once |
| **Start new** | Launch additional servers from the manager |
| **Port conflict detection** | Warns if port is already in use |
| **Quick select** | Press 1-9 to quickly select servers |
| **Auto-scroll logs** | Logs auto-scroll, can be paused with scroll keys |
| **Persist across views** | Servers keep running when navigating to other views |

#### Server Process Management:

```go
// ServerManager handles multiple concurrent server instances
type ServerManager struct {
    servers  map[int]*ServerInstance  // key: port
    mu       sync.RWMutex
}

type ServerInstance struct {
    Model     string
    Type      string
    Port      int
    Host      string
    Cmd       *exec.Cmd
    PTY       *os.File
    Output    *ring.Buffer  // Circular buffer for logs
    StartedAt time.Time
    Running   bool
}

func (m *ServerManager) Start(config ServerConfig) (*ServerInstance, error)
func (m *ServerManager) Stop(port int) error
func (m *ServerManager) StopAll() error
func (m *ServerManager) GetLogs(port int) string
func (m *ServerManager) List() []*ServerInstance
```

---

## Project Structure

```
efx-face-manager/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ efx-face/
â”‚       â””â”€â”€ main.go                 # Entry point with cobra commands
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ tui/
â”‚   â”‚   â”œâ”€â”€ app.go                  # Main TUI application model
â”‚   â”‚   â”œâ”€â”€ menu.go                 # Main menu view
â”‚   â”‚   â”œâ”€â”€ templates.go            # Template selection view
â”‚   â”‚   â”œâ”€â”€ models.go               # Model list/selection view
â”‚   â”‚   â”œâ”€â”€ modeltype.go            # Model type selection view
â”‚   â”‚   â”œâ”€â”€ config_panel.go         # Three-panel configuration view
â”‚   â”‚   â”œâ”€â”€ config_lm.go            # LM-specific configuration options
â”‚   â”‚   â”œâ”€â”€ config_image.go         # Image gen/edit configuration options
â”‚   â”‚   â”œâ”€â”€ config_whisper.go       # Whisper configuration options
â”‚   â”‚   â”œâ”€â”€ config_embeddings.go    # Embeddings configuration options
â”‚   â”‚   â”œâ”€â”€ search.go               # HuggingFace search view
â”‚   â”‚   â”œâ”€â”€ details.go              # Model details preview
â”‚   â”‚   â”œâ”€â”€ server_manager.go       # Multi-server management view
â”‚   â”‚   â”œâ”€â”€ server_new.go           # New server setup view
â”‚   â”‚   â”œâ”€â”€ storage.go              # Storage path configuration
â”‚   â”‚   â”œâ”€â”€ styles.go               # Lipgloss styles
â”‚   â”‚   â”œâ”€â”€ panels.go               # Panel layout helpers
â”‚   â”‚   â””â”€â”€ keys.go                 # Key bindings
â”‚   â”œâ”€â”€ hf/
â”‚   â”‚   â”œâ”€â”€ client.go               # HuggingFace API client
â”‚   â”‚   â”œâ”€â”€ models.go               # HuggingFace response types
â”‚   â”‚   â””â”€â”€ download.go             # Model download with hf CLI
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”œâ”€â”€ manager.go              # Multi-server process manager
â”‚   â”‚   â”œâ”€â”€ instance.go             # Single server instance
â”‚   â”‚   â”œâ”€â”€ config.go               # Server configuration types
â”‚   â”‚   â”œâ”€â”€ output.go               # Log output buffer (ring buffer)
â”‚   â”‚   â””â”€â”€ detect.go               # Detect mlx-openai-server installation
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ store.go                # Model storage (symlinks, cache)
â”‚   â”‚   â”œâ”€â”€ types.go                # Model types & presets
â”‚   â”‚   â””â”€â”€ templates.go            # Predefined template configurations
â”‚   â””â”€â”€ config/
â”‚       â”œâ”€â”€ config.go               # App configuration
â”‚       â””â”€â”€ paths.go                # Path detection & management
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ Makefile
â”œâ”€â”€ README.md
â””â”€â”€ PLAN.md (this file)
```

---

## Dependencies

```go
// go.mod
module github.com/lmarques/efx-face-manager

go 1.22

require (
    github.com/charmbracelet/bubbletea v1.2.0
    github.com/charmbracelet/bubbles v0.20.0
    github.com/charmbracelet/glamour v0.8.0
    github.com/charmbracelet/lipgloss v1.0.0
    github.com/charmbracelet/huh v0.6.0
    github.com/spf13/cobra v1.8.0
)
```

### Key Libraries:
- **bubbletea**: Core TUI framework (Elm architecture)
- **bubbles**: UI components (viewport, textinput, list, spinner, paginator)
- **lipgloss**: Styling & layout (borders, colors, flexbox-like layouts)
- **glamour**: Markdown rendering (for model details)
- **huh**: Form components (for configuration views)
- **cobra**: CLI commands

---

## Commands

```
efx-face                        # Launch TUI (default: main menu)
efx-face run [model]            # Run model directly
efx-face list                   # List installed models
efx-face install <repo-id>      # Install model from HuggingFace
efx-face uninstall <model>      # Uninstall a model
efx-face search [query]         # Search HuggingFace models
efx-face config                 # Configure storage path
efx-face version                # Show version
```

---

## Implementation Phases

### Phase 1: Foundation (Day 1)
- [ ] Initialize Go module
- [ ] Set up project structure
- [ ] Implement basic TUI shell with bubbletea
- [ ] Create main menu view
- [ ] Implement lipgloss styles (colors, borders, panels)
- [ ] Detect mlx-openai-server installation

### Phase 2: Model Management (Day 2)
- [ ] Implement model store (list symlinks)
- [ ] Create model selection view
- [ ] Implement model type selection
- [ ] Create storage path configuration view
- [ ] Add template models (hardcoded configs)

### Phase 3: Three-Panel Configuration (Day 3)
- [ ] Implement panel layout helpers (lipgloss.JoinHorizontal)
- [ ] Create three-panel configuration view structure
- [ ] Panel 1: Control panel with actions
- [ ] Panel 2: Options list with current values
- [ ] Panel 3: Option setup (select lists, inputs)
- [ ] Live command preview in header
- [ ] LM/multimodal configuration options
- [ ] Panel focus navigation (â†/â†’ keys)

### Phase 4: Multi-Server Manager (Day 4)
- [ ] Implement ServerManager (multi-instance support)
- [ ] Create RingBuffer for log storage
- [ ] Server list view with port/model/type
- [ ] Log viewport with server switching
- [ ] Start/stop individual servers
- [ ] Stop all servers
- [ ] Port conflict detection
- [ ] New server setup from manager view

### Phase 5: Server Process Integration (Day 5)
- [ ] PTY handling for colored output
- [ ] Bubbletea integration with server updates (channels)
- [ ] Auto-scroll logs with manual scroll override
- [ ] Graceful shutdown (SIGTERM then SIGKILL)
- [ ] Server persistence across view navigation

### Phase 6: HuggingFace Integration (Day 6)
- [ ] Implement HuggingFace API client
- [ ] Create search view with pagination
- [ ] Implement model details preview
- [ ] Add model download (hf CLI wrapper)
- [ ] Handle download progress

### Phase 7: Additional Model Types (Day 7)
- [ ] Image generation configuration (three-panel)
- [ ] Image edit configuration (three-panel)
- [ ] Whisper configuration (three-panel)
- [ ] Embeddings configuration (three-panel)

### Phase 8: Polish & Distribution (Day 8)
- [ ] Error handling & edge cases
- [ ] Add help views
- [ ] Cross-platform build (darwin/arm64, darwin/amd64, linux/amd64)
- [ ] Create Makefile
- [ ] Release setup (goreleaser)

---

## Configuration File

```json
// ~/.config/efx-face-manager/config.json
{
  "version": "1.0.0",
  "modelDir": "/Volumes/T7/mlx-server",
  "autoDetectPath": true,
  "defaultPort": 8000,
  "defaultHost": "0.0.0.0",
  "templates": {
    "custom": []
  },
  "lastUsed": {
    "model": "GLM-4.7-Flash-8bit",
    "type": "lm"
  }
}
```

---

## Key Implementation Details

### 1. Three-Panel Configuration Layout (lipgloss)

```go
// Three-panel configuration view using lipgloss.JoinHorizontal
func (m configPanelModel) View() string {
    width := m.width
    panelWidth := (width - 6) / 3  // Account for borders and gaps

    // Top header with model info and live command preview
    header := m.renderHeader()

    // Panel 1: Control Panel (left)
    controlPanel := lipgloss.NewStyle().
        Width(panelWidth).
        Height(m.height - 8).
        Border(lipgloss.RoundedBorder()).
        BorderForeground(m.getPanelBorderColor(0)).
        Padding(1, 1).
        Render(m.renderControlPanel())

    // Panel 2: Options Panel (center)
    optionsPanel := lipgloss.NewStyle().
        Width(panelWidth).
        Height(m.height - 8).
        Border(lipgloss.RoundedBorder()).
        BorderForeground(m.getPanelBorderColor(1)).
        Padding(1, 1).
        Render(m.renderOptionsPanel())

    // Panel 3: Option Setup (right)
    setupPanel := lipgloss.NewStyle().
        Width(panelWidth).
        Height(m.height - 8).
        Border(lipgloss.RoundedBorder()).
        BorderForeground(m.getPanelBorderColor(2)).
        Padding(1, 1).
        Render(m.renderSetupPanel())

    // Join panels horizontally
    panels := lipgloss.JoinHorizontal(lipgloss.Top, controlPanel, optionsPanel, setupPanel)

    // Footer with key bindings
    footer := m.renderFooter()

    return lipgloss.JoinVertical(lipgloss.Left, header, panels, footer)
}

func (m configPanelModel) getPanelBorderColor(panelIdx int) lipgloss.Color {
    if m.focusedPanel == panelIdx {
        return lipgloss.Color("#7C3AED")  // Purple for focused
    }
    return lipgloss.Color("#6B7280")  // Gray for unfocused
}
```

### 2. Multi-Server Manager (lipgloss Split Panel)

```go
// Server manager with split panel layout
func (m serverManagerModel) View() string {
    leftWidth := m.width * 40 / 100   // 40% for controls
    rightWidth := m.width * 60 / 100  // 60% for logs

    // Left panel: Server list + controls
    leftPanel := lipgloss.NewStyle().
        Width(leftWidth).
        Height(m.height - 4).
        Border(lipgloss.RoundedBorder()).
        BorderForeground(lipgloss.Color("#7C3AED")).
        Render(m.renderControlPanel())

    // Right panel: Log viewport for selected server
    rightPanel := lipgloss.NewStyle().
        Width(rightWidth).
        Height(m.height - 4).
        Border(lipgloss.RoundedBorder()).
        BorderForeground(lipgloss.Color("#6B7280")).
        Render(m.renderLogPanel())

    return lipgloss.JoinHorizontal(lipgloss.Top, leftPanel, rightPanel)
}
```

### 3. Server Process Manager (Multi-Instance)

```go
// ServerManager handles multiple concurrent server instances
type ServerManager struct {
    instances map[int]*ServerInstance  // key: port
    mu        sync.RWMutex
    updates   chan ServerUpdate  // For TUI updates
}

type ServerInstance struct {
    Model     string
    Type      string
    Port      int
    Host      string
    Cmd       *exec.Cmd
    PTY       *os.File
    Output    *RingBuffer  // Circular buffer for logs (last 1000 lines)
    StartedAt time.Time
    Running   bool
    mu        sync.Mutex
}

type ServerUpdate struct {
    Port    int
    Type    UpdateType  // Started, Stopped, NewOutput, Error
    Data    string
}

func NewServerManager() *ServerManager {
    return &ServerManager{
        instances: make(map[int]*ServerInstance),
        updates:   make(chan ServerUpdate, 100),
    }
}

func (m *ServerManager) Start(config ServerConfig) (*ServerInstance, error) {
    m.mu.Lock()
    defer m.mu.Unlock()

    // Check port availability
    if _, exists := m.instances[config.Port]; exists {
        return nil, fmt.Errorf("port %d already in use", config.Port)
    }

    instance := &ServerInstance{
        Model:     config.Model,
        Type:      config.Type,
        Port:      config.Port,
        Host:      config.Host,
        Output:    NewRingBuffer(1000),
        StartedAt: time.Now(),
    }

    // Build command args
    args := config.BuildArgs()

    // Start with PTY for colored output
    cmd := exec.Command("mlx-openai-server", args...)
    pty, err := pty.Start(cmd)
    if err != nil {
        return nil, err
    }

    instance.Cmd = cmd
    instance.PTY = pty
    instance.Running = true

    m.instances[config.Port] = instance

    // Read output in goroutine
    go instance.readOutput(m.updates)

    m.updates <- ServerUpdate{Port: config.Port, Type: UpdateStarted}
    return instance, nil
}

func (m *ServerManager) Stop(port int) error {
    m.mu.Lock()
    defer m.mu.Unlock()

    instance, exists := m.instances[port]
    if !exists {
        return fmt.Errorf("no server on port %d", port)
    }

    // Send SIGTERM for graceful shutdown
    if err := instance.Cmd.Process.Signal(syscall.SIGTERM); err != nil {
        // Force kill if SIGTERM fails
        instance.Cmd.Process.Kill()
    }

    instance.Running = false
    delete(m.instances, port)

    m.updates <- ServerUpdate{Port: port, Type: UpdateStopped}
    return nil
}

func (m *ServerManager) StopAll() error {
    m.mu.Lock()
    ports := make([]int, 0, len(m.instances))
    for port := range m.instances {
        ports = append(ports, port)
    }
    m.mu.Unlock()

    for _, port := range ports {
        m.Stop(port)
    }
    return nil
}

func (m *ServerManager) GetLogs(port int) string {
    m.mu.RLock()
    defer m.mu.RUnlock()

    if instance, exists := m.instances[port]; exists {
        return instance.Output.String()
    }
    return ""
}

func (m *ServerManager) List() []*ServerInstance {
    m.mu.RLock()
    defer m.mu.RUnlock()

    list := make([]*ServerInstance, 0, len(m.instances))
    for _, instance := range m.instances {
        list = append(list, instance)
    }
    // Sort by port
    sort.Slice(list, func(i, j int) bool {
        return list[i].Port < list[j].Port
    })
    return list
}
```

### 4. Ring Buffer for Server Logs

```go
// RingBuffer keeps last N lines of output
type RingBuffer struct {
    lines    []string
    capacity int
    head     int
    size     int
    mu       sync.Mutex
}

func NewRingBuffer(capacity int) *RingBuffer {
    return &RingBuffer{
        lines:    make([]string, capacity),
        capacity: capacity,
    }
}

func (b *RingBuffer) Write(line string) {
    b.mu.Lock()
    defer b.mu.Unlock()

    b.lines[b.head] = line
    b.head = (b.head + 1) % b.capacity
    if b.size < b.capacity {
        b.size++
    }
}

func (b *RingBuffer) String() string {
    b.mu.Lock()
    defer b.mu.Unlock()

    var result strings.Builder
    start := 0
    if b.size == b.capacity {
        start = b.head
    }
    for i := 0; i < b.size; i++ {
        idx := (start + i) % b.capacity
        result.WriteString(b.lines[idx])
        result.WriteString("\n")
    }
    return result.String()
}
```

### 5. HuggingFace API Client

```go
// GET https://huggingface.co/api/models?author=mlx-community&sort=downloads&limit=100
type HFModel struct {
    ID           string `json:"id"`
    Downloads    int    `json:"downloads"`
    Likes        int    `json:"likes"`
    PipelineTag  string `json:"pipeline_tag"`
    LibraryName  string `json:"library_name"`
    LastModified string `json:"lastModified"`
}

func (c *Client) SearchModels(author, query string, page int) ([]HFModel, error) {
    // Implementation
}
```

### 6. Bubbletea Integration with Server Updates

```go
// Listen for server updates in TUI
type serverUpdateMsg ServerUpdate

func listenForServerUpdates(manager *ServerManager) tea.Cmd {
    return func() tea.Msg {
        update := <-manager.updates
        return serverUpdateMsg(update)
    }
}

func (m serverManagerModel) Update(msg tea.Msg) (serverManagerModel, tea.Cmd) {
    switch msg := msg.(type) {
    case serverUpdateMsg:
        // Handle server update (new log line, started, stopped)
        switch msg.Type {
        case UpdateNewOutput:
            // Refresh viewport if this is the selected server
            if msg.Port == m.selectedPort {
                m.viewport.SetContent(m.manager.GetLogs(msg.Port))
                m.viewport.GotoBottom()
            }
        case UpdateStopped:
            // Remove from list, select another if needed
            m.refreshServerList()
        }
        // Continue listening
        return m, listenForServerUpdates(m.manager)

    case tea.KeyMsg:
        switch msg.String() {
        case "s":
            // Stop selected server
            if m.selectedPort > 0 {
                m.manager.Stop(m.selectedPort)
            }
        case "S":
            // Stop all servers
            m.manager.StopAll()
        case "n":
            // Open new server dialog
            return m, openNewServerView()
        }
    }
    return m, nil
}
```

---

## Build & Distribution

```makefile
# Makefile
VERSION := 1.0.0

build:
	go build -ldflags "-X main.version=$(VERSION)" -o bin/efx-face ./cmd/efx-face

install:
	go install -ldflags "-X main.version=$(VERSION)" ./cmd/efx-face

# Cross-compilation for multi-platform
build-all:
	GOOS=darwin GOARCH=arm64 go build -ldflags "-X main.version=$(VERSION)" -o bin/efx-face-darwin-arm64 ./cmd/efx-face
	GOOS=darwin GOARCH=amd64 go build -ldflags "-X main.version=$(VERSION)" -o bin/efx-face-darwin-amd64 ./cmd/efx-face
	GOOS=linux GOARCH=amd64 go build -ldflags "-X main.version=$(VERSION)" -o bin/efx-face-linux-amd64 ./cmd/efx-face
	GOOS=linux GOARCH=arm64 go build -ldflags "-X main.version=$(VERSION)" -o bin/efx-face-linux-arm64 ./cmd/efx-face

clean:
	rm -rf bin/

release:
	goreleaser release --clean
```

### Installation Methods

```bash
# Go install
go install github.com/lmarques/efx-face-manager/cmd/efx-face@latest

# Homebrew (future)
brew install lmarques/tap/efx-face

# Direct download
curl -sSL https://github.com/lmarques/efx-face-manager/releases/latest/download/efx-face-darwin-arm64 -o efx-face
chmod +x efx-face
sudo mv efx-face /usr/local/bin/
```

---

## Success Criteria

- [ ] Single binary, no external dependencies (except mlx-openai-server, hf CLI)
- [ ] Beautiful TUI with consistent lipgloss styling
- [ ] **Three-panel configuration layout** - All options visible on single page
- [ ] **Multi-server management** - Run multiple servers on different ports
- [ ] **Server log viewport** - Scrollable logs per server (glow-style)
- [ ] **Server switching** - View logs of any running server
- [ ] Split-panel layout with scrollable server output
- [ ] All features from bash script preserved
- [ ] Template models with one-click launch
- [ ] HuggingFace search with pagination
- [ ] Model details preview
- [ ] Configuration forms for all model types (lm, multimodal, image-gen, whisper, embeddings)
- [ ] Cross-platform builds (darwin/linux, arm64/amd64)
- [ ] Fast startup (<100ms)
- [ ] Clear screen before config redraw (per memory spec)

---

## Notes

### Key Design Decisions:

1. **Three-panel configuration** - Replaces multi-screen navigation with single-page layout
   - Left: Quick actions (Run, Cancel, Trust toggle)
   - Center: All configurable options with current values
   - Right: Context-sensitive setup (select lists, inputs)
   - Live command preview updates as options change

2. **Multi-server management** - Run multiple mlx-openai-server instances
   - Each server on different port (8000, 8001, 8002...)
   - Switch between server logs without stopping them
   - Start new servers from manager without going back to main menu
   - Ring buffer keeps last 1000 lines per server

3. **Server persistence** - Servers keep running when navigating TUI
   - Can browse models, search HuggingFace while servers run
   - Server manager accessible from any view

### Differences from efx-skill-management:
1. **Three-panel layout**: Config view uses 3 columns vs simple list
2. **Multi-server support**: Manage multiple processes vs single API client
3. **Server output panel**: Real-time scrollable log viewer per server
4. **Process management**: Running external processes vs API calls
5. **Local focus**: No API registries, just HuggingFace + local models

### Technical Challenges:
1. **PTY handling**: Proper terminal emulation for colored server output
2. **Process signals**: Graceful shutdown of mlx-openai-server (SIGTERM â†’ SIGKILL)
3. **Layout responsiveness**: Three-panel and split-panel adapting to terminal size
4. **Concurrent log capture**: Multiple goroutines writing to ring buffers
5. **Download progress**: Capturing hf CLI download progress
6. **Channel synchronization**: Server updates to TUI via bubbletea messages
7. **Clear screen on config update**: Per project memory spec (8edd22bd)

---

## References

- [charmbracelet/bubbletea](https://github.com/charmbracelet/bubbletea)
- [charmbracelet/lipgloss](https://github.com/charmbracelet/lipgloss)
- [charmbracelet/bubbles](https://github.com/charmbracelet/bubbles)
- [charmbracelet/glamour](https://github.com/charmbracelet/glamour)
- [charmbracelet/huh](https://github.com/charmbracelet/huh)
- [charmbracelet/glow](https://github.com/charmbracelet/glow) - Inspiration for viewport/scroll
- [efx-skill-management](../efx-skill-management) - Reference implementation

---

## Legacy Fallback

The original bash script is preserved at `src/efx-face-manager.sh` for fallback purposes if needed. It can be run directly with:

```bash
./src/efx-face-manager.sh
```

This ensures backwards compatibility while the Go TUI is being developed and tested.

---

## Implementation Status (Updated 2026-02-03)

### Completed Features

| Feature | Status | File(s) |
|---------|--------|---------|
| Main TUI shell with bubbletea | âœ… Done | `app.go` |
| Main menu view | âœ… Done | `menu.go` |
| Lipgloss styles and color scheme | âœ… Done | `styles.go` |
| Model store and detection | âœ… Done | `model/store.go` |
| Template selection view | âœ… Done | `models.go` |
| Model type selection | âœ… Done | `models.go` |
| Three-panel configuration view | âœ… Done | `config_panel.go` |
| LM/Multimodal configuration | âœ… Done | `config_panel.go` |
| Image generation/edit configuration | âœ… Done | `config_panel.go` |
| Whisper configuration | âœ… Done | `config_panel.go` |
| Embeddings configuration | âœ… Done | `config_panel.go` |
| Multi-server manager | âœ… Done | `server_manager.go` |
| Server process management with PTY | âœ… Done | `server/manager.go` |
| Ring buffer for server logs | âœ… Done | `server/output.go` |
| Split-panel layout with logs | âœ… Done | `server_manager.go` |
| HuggingFace API client | âœ… Done | `hf/client.go` |
| HuggingFace search view | âœ… Done | `search.go` |
| Search pagination | âœ… Done | `search.go` |
| Model install via hf CLI | âœ… Done | `search.go` |
| Model uninstall with cache cleanup | âœ… Done | `search.go` |
| Storage path configuration | âœ… Done | `storage.go` |
| Model details/preview view | âœ… Done | `details.go` |
| New server dialog from manager | âœ… Done | `server_new.go` |
| mlx-openai-server detection | âœ… Done | `server/detect.go` |
| CLI: list command | âœ… Done | `app.go` |
| CLI: search command | âœ… Done | `app.go` |
| CLI: install command | âœ… Done | `app.go` |
| CLI: uninstall command | âœ… Done | `app.go` |
| Server updates channel integration | âœ… Done | `app.go` |
| Graceful shutdown (SIGTERM) | âœ… Done | `server/manager.go` |

### Project Structure (Actual)

```
efx-face-manager/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ efx-face/
â”‚       â””â”€â”€ main.go                 # Entry point with cobra commands
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ tui/
â”‚   â”‚   â”œâ”€â”€ app.go                  # Main TUI application model
â”‚   â”‚   â”œâ”€â”€ menu.go                 # Main menu view
â”‚   â”‚   â”œâ”€â”€ models.go               # Model list/selection + type selection
â”‚   â”‚   â”œâ”€â”€ config_panel.go         # Three-panel configuration (all types)
â”‚   â”‚   â”œâ”€â”€ search.go               # HuggingFace search with pagination
â”‚   â”‚   â”œâ”€â”€ details.go              # Model details preview
â”‚   â”‚   â”œâ”€â”€ server_manager.go       # Multi-server management view
â”‚   â”‚   â”œâ”€â”€ server_new.go           # New server setup from manager
â”‚   â”‚   â”œâ”€â”€ storage.go              # Storage path configuration
â”‚   â”‚   â””â”€â”€ styles.go               # Lipgloss styles
â”‚   â”œâ”€â”€ hf/
â”‚   â”‚   â””â”€â”€ client.go               # HuggingFace API client + download
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”œâ”€â”€ manager.go              # Multi-server process manager
â”‚   â”‚   â”œâ”€â”€ config.go               # Server configuration types
â”‚   â”‚   â”œâ”€â”€ output.go               # Ring buffer for logs
â”‚   â”‚   â””â”€â”€ detect.go               # Tool detection
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ store.go                # Model storage (symlinks, cache)
â”‚   â”‚   â””â”€â”€ templates.go            # Predefined template configurations
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ config.go               # App configuration + paths
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ Makefile
â””â”€â”€ PLAN.md
```

### CLI Commands

```
efx-face                        # Launch TUI (default: main menu)
efx-face run [model]            # Run model directly
efx-face list                   # List installed models
efx-face search [query]         # Search HuggingFace models
efx-face install <repo-id>      # Install model from HuggingFace
efx-face uninstall <model>      # Uninstall a model
efx-face config                 # Configure storage path
efx-face servers                # Open server manager
efx-face version                # Show version
```

